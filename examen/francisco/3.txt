#include <stdio.h>
#include <stdlib.h>
#include <string.h>

int main(int argc, char *argv[]) {
    FILE *fp;
    char linea[512];
    char estado[10], nombre[50], version[50];

    fp = popen("dpkg -l", "r");
    if (fp == NULL) return 1;

    while (fgets(linea, sizeof(linea), fp)) {
        if (strstr(linea, argv[1]) != NULL) {
            sscanf(linea, "%s %s %s", estado, nombre, version);
            printf("Paquete instalado: %s\nVersion: %s\n", nombre, version);
            pclose(fp);
            return 0;
        }
    }

    printf("El paquete no esta instalado\n");
    pclose(fp);
    return 0;
}
